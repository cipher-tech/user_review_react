(this.webpackJsonpuser_review_react=this.webpackJsonpuser_review_react||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(38),s=n.n(c),i=(n(44),n(2)),u=(n(45),n(7)),o=n.n(u),l=n(11),j=n(0),b=function(e){var t=e.showAddReview,n=e.socket,a=Object(r.useState)(1.2),c=Object(i.a)(a,2),s=c[0],u=c[1],b=Object(r.useState)(""),d=Object(i.a)(b,2),h=d[0],f=d[1],v=Object(r.useState)(null),p=Object(i.a)(v,2),O=p[0],m=p[1],x=Object(r.useState)(null),w=Object(i.a)(x,2),g=w[0],N=w[1],_=function(){var e=Object(l.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(null);case 2:return e.next=4,N(null);case 4:fetch("https://user-review-server.herokuapp.com/add_review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:s,comment:h})}).then(function(){var e=Object(l.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.json(),e.next=3,N("review submitted");case 3:return e.next=5,n.emit("review_added");case 5:return e.next=7,t(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){m("could not add review")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"container",children:[O?Object(j.jsxs)("p",{className:"error",children:[O," "]}):null,g?Object(j.jsx)("p",{className:"success",children:g}):null,Object(j.jsx)("h2",{className:"header",children:"What\u2019s your rating?"}),Object(j.jsxs)("h4",{className:"sub-header",children:["Rating",Object(j.jsx)("small",{children:"double click to add half star"})]}),Object(j.jsx)("p",{className:"container-rating_star",children:Object(j.jsx)("span",{id:"star_rating",children:[1,2,3,4,5].map((function(e){return e<=Number(s)?Object(j.jsx)("i",{onDoubleClick:function(){return u("".concat(e-Number(.5)))},onClick:function(){return u(e)},className:"fas ".concat(e-Number(s)===.5?"fa-star-half-alt":"fa-star"," star_yellow")},e):Object(j.jsx)("i",{onDoubleClick:function(){return u("".concat(e-Number(.5)))},onClick:function(){return u(e)},className:"fas ".concat(e-Number(s)===.5?"fa-star-half-alt star_yellow":"fa-star star_ash")},e)}))})}),Object(j.jsx)("h4",{className:"sub-header",children:"Review"}),Object(j.jsx)("input",{onChange:function(e){return f(e.target.value)},value:h,className:"container-input",type:"text",placeholder:"Start typing...."}),Object(j.jsx)("button",{id:"submit",onClick:_,className:"rating-button container-button",children:"Submit review"})]})},d=function(e){var t=e.showAddReview,n=e.socket,a=Object(r.useState)([]),c=Object(i.a)(a,2),s=c[0],u=c[1],b=Object(r.useState)(1),d=Object(i.a)(b,2),h=d[0],f=d[1],v=Object(r.useState)(!0),p=Object(i.a)(v,2),O=p[0],m=p[1],x=Object(r.useState)(""),w=Object(i.a)(x,2),g=w[0],N=w[1];Object(r.useEffect)((function(){fetch("https://user-review-server.herokuapp.com/get_reviews",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return n=e.sent,e.next=5,u(n);case 5:r=n.reduce((function(e,t){return e+t.rating}),0),a=r/n.length,f(a.toFixed(1)),m(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){N("could not get reviews")})),n.on("New_review",function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t.reviews||[]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n]);var _=function(e){for(var t=[],n=1;n<6;n++)t[n]=n<=e?Object(j.jsx)("i",{className:"fas ".concat(n-Number(e)===.5?"fa-star-half-alt":"fa-star"," star_yellow")},n):Object(j.jsx)("i",{className:"fas ".concat(n-Number(e)===.5?"fa-star-half-alt star_yellow":"fa-star star_ash")},n);return t};return O?Object(j.jsx)("i",{className:"fas fa-spinner spinner"}):Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("p",{children:[" ",g," "]}),Object(j.jsx)("h2",{className:"header",children:"The Minimalist Entrepreneur"}),Object(j.jsxs)("div",{className:"rating",children:[Object(j.jsxs)("div",{className:"rating-overview",children:[Object(j.jsx)("p",{id:"averageRating",className:"rating-overview_rating_number",children:h}),Object(j.jsx)("p",{className:"rating-overview_rating_star",children:Object(j.jsx)("span",{id:"avgStarRating",children:_(h)})})]}),Object(j.jsx)("button",{onClick:function(){return t(!0)},className:"rating-button",children:"Add review"})]}),Object(j.jsxs)("div",{id:"allReviews",className:"reviews",children:[Object(j.jsx)("h2",{className:"reviews-header",children:"Reviews"}),s.map((function(e,t){return Object(j.jsxs)("div",{className:"review-single",children:[Object(j.jsx)("p",{className:"rating-overview_rating_star",children:Object(j.jsx)("span",{children:_(Math.floor(e.rating))})}),Object(j.jsxs)("p",{className:"review-single__info",children:[Object(j.jsxs)("span",{children:[" ",Math.floor(e.rating),", "]})," ",e.comment]})]},e._id)}))]})]})},h=n(39),f=n.n(h)()("https://user-review-server.herokuapp.com");var v=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(j.jsx)(j.Fragment,{children:n?Object(j.jsx)(b,{socket:f,showAddReview:a}):Object(j.jsx)(d,{socket:f,showAddReview:a})})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root")),p()}},[[77,1,2]]]);
//# sourceMappingURL=main.1fce1677.chunk.js.map